<div style="padding: 16px">
  <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px">
    <h2 style="margin: 0">Chat</h2>
    <span style="opacity: 0.6">{{ conversationId$ | async }}</span>
  </div>

  <div class="messages">
    @for(m of messages$ | async; track $index) {
    <app-message-item [message]="m" />
    }

    <!-- Live stream draft (wÃ¤hrend isStreaming) -->
    @if(isStreaming$ | async) {
    <ng-container>
      <hr />
      <div style="margin-top: 10px">
        <div style="font-weight: 600">assistant (streaming)</div>
        <div style="white-space: pre-wrap; color: lightgrey">{{ draftReasoning$ | async }}</div>
        <div style="white-space: pre-wrap">{{ draft$ | async }}</div>
      </div>
    </ng-container>
    }
  </div>

  <app-composer></app-composer>

  <div *ngIf="error$ | async as err" style="margin-top: 10px; color: #b00020">Error: {{ err }}</div>
</div>
